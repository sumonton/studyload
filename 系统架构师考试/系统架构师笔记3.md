# 九、系统可靠性分析与设计

## 1、可靠性相关的基本概念(❤❤)

* 可靠性是软件系统在应用或系统错误面前，在意外或错误使用的情况系啊维持软件系统的功能特性的基本能力
* 可用性是系统能够正常运行的时间比例
* 软件可靠性≠硬件可靠性
  * 复杂性：软件复杂性BI硬件高，大部分失效来自于软件失效
  * 物理退化：硬件失效主要是物理退化所致，软件不存在物理退化
  * 唯一性：软件是唯一的，每个COPY版本都一样，而两个硬件不可能完全一样
  * 版本更新周期：硬件较慢，软件较快

## 2、系统可靠性分析(❤❤❤❤)

### 2.1 可靠性指标

* 平均无故障时间→（MTTF）MTTF=1/λ，λ为失效率
* 平均故障修复时间→（MTTF）MTTR=1/μ，μ为修复率
* 平均故障间隔时间→（MTBF）MTBF=MTTR+MTTF
* 系统可用性→MTTF/(MTTR+MTTF)X100%

![image-20230915204749894](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309152047968.png)

### 2.2 串联系统与并联系统

![image-20230915205123176](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309152051398.png)

### 2.3 混合系统

![image-20230915205252906](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309152052030.png)

## 3、软件可靠性设计(❤❤❤❤)

* 影响软件可靠性的主要因素

  ![image-20230915205402692](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309152054780.png)

* 可靠性设计

  ![image-20230915205744024](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309152057110.png)

  

### 3.1 N版本程序设计

![image-20230915210145182](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309152101279.png)

* 与通常软件开发过程不同的是，N版本程序设计增加了三个新的阶段：相异成分规范评审、相异性确认、背对背测试
* N版本程序的同步、N版本程序之间的通信、表决算法（全等表决、非精确表决、Cosmetie表决）、一致比较问题、数据相异性

### 3.2 恢复快方法

![image-20230915210504214](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309152105368.png)

* 设计时应保证实现主块和后备块之间的独立性，避免相关错误的产生，使主块和备份块之间的共性错误降到最低程度
* 必须保证验证测试程序的正确性

|              | 恢复块方法   | N版本程序设计 |
| ------------ | ------------ | ------------- |
| 硬件运行环境 | 单机         | 多机          |
| 错误检测方法 | 验证测试程序 | 表决          |
| 恢复策略     | 后向恢复     | 前向恢复      |
| 实时性       | 差           | 好            |

* 前向恢复：是当前的计算继续下去，把系统恢复成连贯的正确状态，弥补当前状态的不连贯情况
* 后向恢复：系统恢复到前一个正确状态，继续执行

### 3.3 防卫性程序设计

* 对于程序中存在的错误和不一致性，通过在程序中包含错误检查代码和错误恢复代码，使得一旦错误发生，程序能撤销错误状态，恢复到一个已知的正确状态中去
* 实现策略：错误检测、破坏估计、错误恢复

### 3.4 双机容错

![image-20230915211401671](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309152114754.png)

* 双机热备模式（主系统、备用系统）
* 双机互备模式（同时提供不同的服务，心不跳则接管）

双机双工模式（同时提供相同服务，集群的一种）

# 十、信息安全技术基础知识

## 1、信息安全基础（❤❤）

* 信息安全包括5个基本要素

  | 名称     | 说明                                                         |
  | -------- | ------------------------------------------------------------ |
  | 机密性   | 机密性是指网络信息不泄露给非授权的用户、实体或程序，能够防止非授权者获取细心 |
  | 完整性   | 完整性是指网络信息或系统未经授权不能进行更改的特性           |
  | 可用性   | 可用性是指合法许可的用户能够及时获取网络信息或服务的特性     |
  | 可控性   | 可控性是指可以控制授权范围内的信息流向及行为方式             |
  | 可审查性 | 可审查性是指对出现的信息安全问题提供调查的依据和手段         |

  * 信息安全的范围包括设备安全、数据安全、内容安全和行为安全

* 网络安全漏洞
  * 物理安全性
  * 软件安全漏洞
  * 不兼容使用安全漏洞
  * 选择合适的安全哲理
* 网络安全威胁
  * 非授权访问
  * 信息泄露或丢失
  * 破坏数据完整性
  * 拒绝服务攻击
  * 利用网络传播病毒
* 安全措施的目标
  * 访问控制
  * 认证
  * 完整性
  * 审计
  * 保密

## 2、信息加解密技术（❤❤❤）

![image-20230917163427964](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309171634086.png)

* 非对称加密

  ![image-20230917163645712](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309171636804.png)

  * 任何人的【私钥】，只有自己拥有
  * 任何人的【公钥】，可以明文公开发送

| 对称加密算法【共享秘钥】                                     | 非对称加密算法【公开秘钥】                                   |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 【用途】对消息明文进行加密传送                               | 【用途】对密钥加密，做数字签名                               |
| Des：替换+移位、56位密钥、64位数据块、速度快、密钥易产生<br/>3DES(三重DES)：密钥长度112【两个56位的密钥K1、K2】；加密：K1加密>K2解密>K1加密；解密：K1解密>K2加密>K1解密<br/>IDEA：128位密钥 、64位明文/密文，PGP<br/>其他对称加密算法：RC-5；AES | RSA：2048位（或1024位）密钥<br/>Elgamal：安全性依赖于计算有限域上离散对数这一难题<br>ECC：椭圆权限算法<br/>Diffie-Hellman |

## 3、访问控制及数字签名技术（❤❤❤）

### 3.1 访问控制的基本模型

* 访问控制的目标有两个
  * 阻止非法用户进入系统
  * 阻止合法用户对系统资源的非法使用，即禁止合法用户的越权访问
* 访问控制的三要素
  * 主体：可以对其他实体施加动作的主动实体，记为S
  * 客体：是接受其他实体访问的被动实体，记为O
  * 控制策略：是主体对客体的操作行为集和约束条件集，记为KS

### 3.2 访问控制的视线技术

* 访问控制矩阵（ACM）：矩阵中的每一格表示所在行的主体对所在列的客体的访问授权

  |       | file1 | file2 | file3 |
  | ----- | ----- | ----- | ----- |
  | user1 | rw    |       | rw    |
  | user2 | r     | rwx   | x     |
  | user4 | x     | R     |       |

* 访问控制列表：访问控制矩阵按列分解，具体如下

  ![image-20230917213429594](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172134712.png)

* 能力表：访问控制矩阵按行分解，具体如下：

  ![image-20230917213501159](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172135221.png)

* 授权关系表：对应访问矩阵中每一各非空元素的实现技术。像安全数据库系统通常用授权关系表来实现其访问控制安全机制

### 3.3 数字签名技术

* 信息摘要：单向散列函数【不可逆】、固定长度的散列值

* 摘要用途：确保信息【完整性】，防篡改

  ![image-20230917214129372](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172141436.png)

* 常用的消息摘要算法有MD5，SHA等，市场上广泛使用的MD5，SHA算法的散列值分别为128和160位，由于SHA通常采用的密钥长度较长，因此安全性高于MD5

![image-20230917214559846](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172145923.png)

![image-20230917214802090](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172148208.png)

## 4、密钥管理技术（❤❤）

* 数字证书内容

  * 证书的版本信息
  * 证书的序列号，每个证书都有一个唯一的证书序列号
  * 证书所使用的签名算法
  * 证书的发型机构名称，命名规则一般采用x.500格式
  * 证书的有效期，现在通用的证书一般采用UTC时间格式，它的计时范围为1950-2049
  * 证书所有的人的名称，命名规则一般采用X,500格式
  * 证书所有人的公开秘钥
  * 证书发行者对证书的签名

* PKI公钥体系

  ![image-20230917215714774](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172157907.png)

  ![image-20230917215905218](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172159317.png)

## 5、 信息安全保障体系

* 计算机信息系统安全保护等级（GB 17859-1999）

  * 用户自主保护级：适用于普通内联网用户。系统破坏后，对公民、法人和其他组织的权益有损害，但不损害国家安全社会秩序和公共利益。
  * 系统审计保护级：适用于通过内联网或国际网进行商务活动，需要保密的非重要单位。系统破坏后，对公民、法人和其他组织的权益有严重损害，或损害社会秩序和公共利益，但不损害国家安全
  * 安全标记保护级：使用与地方各级国家机关、金融机构、邮电通信、能源与水源供给部门、交通运输、大型工商与信息技术企业、重点工程建设等单位。系统破坏后，对社会秩序和公共利益造成严重损害，或对国家安全造成损害
  * 结构化保护级：使用与中央级国家机关、广播电视部门、重要物资储备单位、社会应急服务部门、尖端科技企业集团、国家重点科研机构和国防建设等部门。系统破坏后，对社会秩序和公共利益造成特别严重的损害，或对国家安全造成严重损害
  * 访问验证保护级：适用于国防关键部门和依法需要对计算机信息系统实施特殊隔离的单位。系统破坏后，对国家安全造成特别严重损害

* 计算机信息系统安全保护等级

  ![image-20230917220925195](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172209327.png)

## 6、小结

![image-20230917221210299](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172212456.png)

# 十一、安全架构设计理论与实践

## 1、安全架构概述（❤❤）

* 信息安全所面临的威胁

  ![image-20230917230922028](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172309085.png)

* 被动攻击：收集信息为主，破坏保密性

  ![image-20230917231920273](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172319422.png)

* 主动攻击：主动攻击的类型主要有：中断（破坏可用性），篡改（破坏完整性），伪造（破坏真实性）

  | 攻击名称             | 描述                                                         |
  | -------------------- | ------------------------------------------------------------ |
  | 假冒身份             | 非法用户冒充成为合法用户，特权小的用户冒充称为特权大的用户   |
  | 抵赖                 | 否认自己曾经发布过的某条消息、伪造一份对方来信等             |
  | 旁路控制【旁路攻击】 | 密码学中是指绕过对加密算法的繁琐分析，利用密码算法的硬件实现的运算中泄漏的信息。如执行时间、功耗、电磁辐射等，结合统计理论快速的破解密码系统 |
  | 重放攻击             | 所截获的某次合法的通信数据拷贝，出于非法的目的而被重新发送。加【时间戳】能识别并应对重放攻击 |
  | 拒绝服务（DOS）      | 破坏服务的【可用性】，对信息或其他资源的合法访问被无条件的组织 |
  | XSS跨站脚本攻击      | 通过利用网页【开发时留下的漏洞】，通过巧妙的方法注入恶意指令代码到网页 |
  | CSRF跨站请求伪造攻击 | 攻击者通过一些技术手段欺骗用户的浏览器访问一个自己曾经认证过的网站并执行一些操作（如转账或购买商品等） |
  | 缓冲区溢出攻击       | 利用【缓冲区溢出漏洞】进行攻击。在各种操作系统、应用软件中广泛存在 |
  | SQL注入攻击          | 攻击者把SQL命令插入到Web表单，欺骗服务器执行恶意的SQL命令。<br/>SQL注入攻击的方式：【恶意拼接查询】、【利用注释执行非法命令】、【传入非法参数】、【添加额外条件】<br/>抵御SQL攻击的方式包括：【使用正则表达式】、【使用参数化的过滤性语句】、【检查用户输入的合法性】、【用户相关数据加密处理】、【存储过程来执行查询】、【使用专业的漏洞扫描工具】 |

## 2、安全模型（❤❤❤）

### 2.1 安全模型的分类

![image-20230917233446615](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172334701.png)

### 2.2 BLP模型（机密性模型，下读上写）

* Bell-LaPadula模型是符合军事安全策略的计算机安全模型，简称BLP模型。BLP模型的安全规则如下：
  * 简单安全规则：安全级别低的主体不能读安全级别高的客体
  * 星属性安全规则：安全级别高的主体不能往低级别的客体写
  * 强星属性安全规则：不允许对另一级别进行读写
  * 自主安全规则：使用访问控制矩阵来定义说明自由存取控制

### 2.3 Biba模型（完整性模型，上读下写）

* BiBa模型主要用于防止非授权修改系统信息，以保护系统的信息完整性。该模型通BLP模型类似，采用主体、客体、完整性级别描述安全策略要求。BiBa模型能够防止数据从低完整性级别流向高完整性级别，其安全规则如下：
  * 星完整规则：表示完整性级别低的主体不能对完整性级别高的客体写数据
  * 简单完整性规则：表示完整性级别高的主体不能从完整性级别低的客体读取数据
  * 调用属性规则：表示一个完整性级别低的主体不能从级别高的客体调用程序或服务

### 2.4 Chinese Wall模型

* Chinese Wall模型的安全策略的基础是客户访问的信息不会与当前他们可支配的信息产生冲突。其访问客体控制的安全规则如下：
  * 与主题曾经访问过的信息属于同一公司数据集合的信息，即墙内信息可以访问
  * 属于一个完全不同的利益冲突组的可以访问
  * 主体能够对一个客体进行写的前提是主体未对任何属于其他公司数据集进行过访问
* 定理1：一个主题一旦访问过一个客体，则该主体智能访问与同一个公司数据集的客体或在不同利益组的客体
* 定理2：在一个利益冲突组中，一个主体最多只能访问一个公司数据集

## 3、信息安全整体架构设计

### 3.1 WPDRRC模型

* WPDRRC模型包括6个环节和3个要素

  * 6个环节包括：预警、保护、检测、响应、恢复和反击。模型蕴含的网络安全能力主要是预警能力、保护能力、检测能力、响应能力、恢复能力和反击能力
  * 3大要素：人员、策略和技术

* 各模型安全防范功能

  ![image-20230917235754640](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309172357792.png)

  

## 4、网络安全体系架构设计

### 4.1 开放系统互联安全体系结构

![image-20230918000204328](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180002467.png)

![image-20230918000345158](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180003284.png)

### 4.2 认证框架

* 鉴别的基本目的是防止其他实体占用和独立操作被鉴别实体的身份

* 鉴别的方式如下：

  * 已知的
  * 拥有的
  * 不改变的特性
  * 相信可靠的第三方建立的鉴别
  * 环境

* 鉴别信息的类型包括交换鉴别信息、申请鉴别信息和验证鉴别信息

  ![image-20230918000628614](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180006723.png)

### 4.3 访问控制框架

* 访问控制决定开发系统环境中允许使用哪些资源，在什么地方适合阻止未授权访问的过程

* 基本访问控制功能示意图

  ![image-20230918000829537](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180008694.png)

### 4.4 机密性框架

* 机密性服务的目的是确保信息仅仅是被授权者可用。机密性机制
  * 通过禁止访问提供机密性
  * 通过加密提供机密性

### 4.5 完整性框架

* 完整性框架的目的是通过组织威胁或探测威胁，保护可能遭到不同方式危害的数据完整性和数据相关属性完整。完整性机制的类型
  * 组织对媒体访问的机制
  * 泳衣探测对数据或数据项序列的非授权修改的机制

### 4.6 抗抵赖框架

* 抗抵赖服务包括证据的生成，验证和记录，以及在解决纠纷时随即进行的证据恢复和再次验证。抗抵赖由4个独立的阶段组成：

  ![image-20230918001256373](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180012484.png)

### 4.7 小结

![image-20230918001443900](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180014965.png)

## 5、区块链技术（❤❤）

### 5.1 什么是区块链

* 【区块链】≠比特币
* 比特币底层采用了区块链技术
* 比特币交易在我国定位为【非法应用】

### 5.2 区块链的特点

* 去中心化：由于使用分布式核算和存储，不存在中心化的硬件或管理机构，任意节点的权利和义务都是均等，系统中的数据块由整个系统中具有维护功能的节点来共同维护
* 开放性：系统是开放的，如：区块链上的【交易信息是公开的】，不过【账户身份信息是高度加密的】
* 自治性：区块链采用基于协商一致的规范和协议（比如一套公开透明的算法）使得整个系统中的所有节点能够在去信任的环境自由安全的交换数据，使得对“人”的信任改成对机器的信任，任何人为的干预不起作用
* 安全性（信息不可篡改）：数据在多个节点存储了多份，篡改数据的改掉51%节点的数据，这太难。同时，还有其它安全机制，如：比特币的每笔交易，都由付款人用私钥签名，证明确定是他同意向某人付款，其他人无法伪造
* 匿名性（去信任）：由于节点之间的交换遵循固定的算法，其数据交互是无需信任的（区块链中的程序规则会自行判断活动是否有效），因此交易对手无须通过公开身份的方式让对方对自己产生信任，对信用的累计非常有帮助

### 5.3 去中心化

* 区块链是一个分布式账本，一种特殊的分布式数据库

![image-20230918002359745](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180023870.png)

* 链表在多个节点存储，没有中心节点，数据不一致时，以“少数服从多数”的原则执行
* 所以要篡改成功，除非篡改51%的节点

### 5.4 哈希加密/放篡改

![image-20230918002738329](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180027489.png)

### 5.5 共识算法（博弈论）/全民记账

![image-20230918003119715](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180031822.png)



## 6、案例分析练习题

![image-20230918003728440](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180037605.png)

# 十二、计算机系统基础知识

## 1、计算机系统概述

![image-20230918004305543](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180043671.png)

### 1.1 计算机组成结构

![image-20230918004514709](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180045807.png)

### 1.2 存储系统-层次化存储结构

![image-20230918004854952](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309180048091.png)

### 1.3 存储系统-Cache

* Cache的功能：提高CPU数据输入输出的速率，突破冯诺依曼瓶颈，即CPU与存储系统间数据传送带宽限制

* 在计算机的存储系统体系中，Cache是访问速度最快的层次

* CacheUI程序员来说是透明的

* 使用Cache改善系统性能的依据是程序的局部性原理

  * 时间局部性
  * 空间局部性

* 时间局部性：指程序中的某条指令一旦执行，不久以后该指令可能再次执行，典型原因是由于程序中存在着大量的循环操作

* 空间局部性：指一旦程序访问了某个存储单元，不久以后，其附近的存储单元也被访问，即程序在一段时间内所访问的地址可能集中在一定的范围内，其典型情况是程序的顺序执行 

* 工作集理论：工作集是进程运行时被频繁访问的页面合集

* 如果以h代表队Cache的访问命中率，$t_1$表示Cache的周期时间内，$t_2$表示主存储器周期时间，以读操作为例，使用“Cache+主存储器”的系统的平均周期为$t_3$，则

  $t_3=h*t_1+(1-h)*t_2$

  其中（1-h）又称为失效率（未命中率）

## 2、操作系统（❤❤❤❤）

### 2.1 操作系统概述

![image-20230918231359372](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182313491.png)

#### 1）特殊的操作系统

| 分类           | 特点                                                         |
| -------------- | ------------------------------------------------------------ |
| 批处理操作系统 | 单道批：一次一个作业入内存，作业由程序、数据、作业说明书组成<br/>多道批：一次多个作业入内存，特点：多道、宏观上并行微观上串行 |
| 分时操作系统   | 采用时间片轮转的方式为多个用户提供服务，每个用户感觉独占系统<br/>特点：多路性、独立性、交互性和及时性 |
| 实时操作系统   | 实时控制系统和实时信息系统<br/>交互能力要求不高，可靠性要求高（规定时间内响应并处理） |
| 网络操作系统   | 方便有效共享网络资源，提供服务软件和有关协议的集合<br/>主要的网络操作系统有：Unix、Linux、和Windows Server系统 |
| 分布式操作系统 | 任意两台计算机可以通过通信交换信息<br/>是网络操作系统的更高级形式，具有透明性、可靠性和高性能等特性 |
| 微机操作系统   | Windows：Microsoft开发的图形用户界面、多任务、多线程操作系统<br/>Linux：免费使用和自由传播的类Unix操作系统，多用户、多任务、多线程和多CPU的操作系统 |
| 嵌入式操作系统 | 运行在智能芯片环境中<br/>特点：微型化、可定制（针对硬件变化配置）、实时性、可靠性、易移植性（HAL和BSP支持） |

### 2.2 进程管理

#### 1）进程和线程的基本概念

* 进程的概念：进程是程序在一个数据集合上运行的过程，它是系统进行资源分配和调度的一个独立单位。它由程序块、进程控制块（PCB）和数据块三部分组成

  * PCB：PCB是进程存在的唯一标志。内容包含进程标识符、状态、位置信息、控制信息、队列指针（链接统一状态的进程）、优先级、现场保护区等

* 进程与程序的区别：进程是程序的一次执行过程，没有过程就没有进程

* 程序是一个静态的概念，而进程是一个动态的概念，它由创建而产生，完成任务后因撤销而消亡；进程是系统进行资源分配和调度的独立单位，而程序不是

* 进程的2个基本属性：可拥有资源的独立单位；可独立调度和分配资源的基本单位

  ![image-20230918232742544](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182327669.png)

#### 2）进程的状态

![image-20230918233443473](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182334593.png)

#### 3） PV操作

* 进程的同步与互斥

  ![image-20230918234003670](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182340792.png)

  * 临界资源：诸进程间需要互斥方式对其进行共享的资源，如打印机、磁带机等

  * 临界区：每个进程中访问临界资源的那段代码称为临界区

  * 信号量：是一种特殊的变量

    ![image-20230918234223716](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182342836.png)

#### 4）PV操作与互斥模型

![image-20230918234811038](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182348223.png)

#### 5）进程的同步与互斥

![image-20230918235127110](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182351248.png)

![image-20230918235421720](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182354807.png)

#### 6）前趋图

* 前趋图的表示
  * 1个箭头表示1个前趋关系
  * A有箭头指向D，则记录未（A，D）
  * 没有前趋进程的节点是起始进程，没有后继进程的节点是终结进程

![image-20230920220249142](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309202202336.png)

* 前趋图（Precedence Graph）是一个有向无环图，记为：→={(Pi,Pj)|Pi must complete before Pj may strat}。

#### 7）死锁

* 进程管理是操作系统的核心，但如果设计不当，就会出现死锁的问题。如果一个进程在等待一件不可能发生的事，则进程就死锁了。而如果一个或多个进程产生死锁，就会造成系统死锁

![image-20230920221701898](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309202217027.png)

* 死锁资源数计算
  * $n>= m*(w-1)+1$

#### 8）银行家算法

* 银行家算法：分配资源的原则
  * 当一个进程对资源的最大需求量不超过系统中的资源数时可以接纳该进程
  * 进程可以分期请求资源，但请求的总数不能超过最大需求量
  * 当系统现有的资源不能满足进程尚需资源数时，对进程的请求可以推迟分配，但总能是进程在有限的时间里得到资源

![image-20230920223141482](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309202231637.png)

### 2.3 存储管理

#### 1）页式存储

* 将程序与内存均划分为同样大小的块，以页为单位将程序调入内存

  ![image-20230920223744177](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309202237369.png)

  * 优点：利用率高，碎片小，分配及管理简单
  * 缺点：增加了系统开销，可能产生抖动现象

![image-20230920224313934](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309202243109.png)

#### 2）段式存储

* 按用户作业中的自然段来划分逻辑空间，然后调入内存，段的长度可以不一样

  ![image-20230920225050246](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309202250374.png)

  * 优点：多道程序共享内存，各段程序修改互不影响
  * 缺点：内存利用率低，内存碎片浪费大

#### 3）段页式存储

* 段式与页式的综合体。先分段，再分页。1个程序有若干段，每个段中可以有若干页，每个页的大小相同，但每个段的大小不同

  ![image-20230920230058811](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309202300995.png)

  * 优点：空间浪费小、存储共享容易、存储保护容易、能动态连接
  * 缺点：由于管理软件的增加，复杂性和开销也随之增加，需要的硬件以及占用的内容也有所增加，使得执行速度大大下降

### 2.4 磁盘管理

#### 1）磁盘基本结构与存取过程

![image-20230918225715839](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182257037.png)

* 存取时间=寻道时间+等待时间，寻道时间是指磁头移动到磁道所需的时间，等待时间为等待读写的扇区转到磁头下方所用的时间

![image-20230918230255953](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182302068.png)

#### 2）磁盘管理-磁盘移臂调度算法

* 先来先服务（FCFS）

![image-20230918230731467](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182307587.png)

* 最短寻道时间优先（SSTF)

![image-20230918230755285](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309182307481.png)

* 扫描算法（SCAN）

* 循环扫描（CSCAN）算法

## 3、文件系统（❤❤）

### 3.1 文件系统概述

#### 1）索引文件结构

![image-20230920231142131](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309202311288.png)

* 文件在逻辑上一定是连续的，在物理上可以是分散的

  ![image-20230920231640124](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309202316304.png)

  * 逻辑位置（字节或页号），对应的索引方式
  * 不同索引方式指向的对象（数据块&索引表）
  * 不同索引方式访问磁盘的次数
  * 能够表示的文件长度

### 3.2 索引文件

### 3.3 位示图

![image-20230920233156461](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309202331565.png)

## 4、系统性能（❤）

### 4.1 性能指标

* 硬件

|  分类  | 指标                                                         |
| :----: | ------------------------------------------------------------ |
| 计算机 | 时钟频率（主频）；运算速度与经度；内存的存储容量；存储器的存取周期；数据处理速率PDR；吞吐率；各种响应时间；各种利用率；RASIS特性；平均故障响应时间；兼容性；可扩充性；性能价格比 |
| 路由器 | 设备吞吐量、端口吞吐量、全双工线速转发能力、丢包率、时延、时延抖动、VPN支持能力、端口硬件队列数、基于Web的管理、网管类型等。 |
| 交换机 | 交换机类型、配置、支持的网络类型、最大ATM端口数、支持协议和标准等 |
|  网络  | 设备级性能指标；网络机性能指标；应用级性能指标；用户级性能指标；吞吐量 |

* 软件

|      分类      | 指标                                                         |
| :------------: | ------------------------------------------------------------ |
|    操作系统    | 系统的可靠性、系统的吞吐率（量）、系统响应时间、系统资源利用率、可移植性 |
| 数据库管理系统 | 衡量数据管理系统的主要性能指标包括数据库本身和管理系统两部分，有：数据库的大小、数据库中表的数量、单个表的大小、表中允许的记录（行）数量、单个记录（行）的大小、表中所允许的索引数量、数据库所允许的索引数量、最大并发事务处理能力、负载均衡能力、最大连接数等 |
|   WEB服务器    | 最大并发连接数据、响应延迟、吞吐量                           |

* 资产刚和数据通路宽度
* 主存容量和存取速度
* 运算速度
  * 主频=外频*倍频
  * 主频与CPU时钟周期
    * $CPU时钟周期=1/主频$
  * CPI与IPC
    * 平均每条指令的平均时钟周期个数（CPI，clock per instruction）=总周期/总条数
    * 每（时钟）周期运行指令条数（IPC，instruction per clock）=总条数/总周期
    * 每条指令完成的总时间=CPI*时钟周期=CPI/主频
  *  MIPS与MFLOPS
    * MIPS：百万条指令每秒
    * MILOPS：每秒百万个浮点操作
    * IPS=总条数/总时间=1/每条指令完成的总时间=1/(CPI/主频)=主频*IPC
    * MIPS=指令条数/（执行时间\*$10^6$)=1/(CPI/主频)=主频\*IPC
    * MFLOPS=浮点操作次数/(执行时间*$10^6$)
* 吞吐量与吞吐率
* 响应时间（RT）与完成时间（TAT）
* 兼容性

### 4.2 性能调整

![image-20230921000039840](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309210000998.png)

### 4.5 阿姆达尔（Amdahl）解决方案

* 对系统中某组件采用某种更快的执行方式，所获得的系统性能的改变程度，取决于该组件被使用的频率，或所占总执行时间的比例。加速比计算公式如下：
* $R={T_p \over T_i}={1 \over (1-F_e)+F_e/S_e}$
* 其中，$T_p$表示不使用改进组件时完成整个任务的时间，$T_i$表示使用改进组件时完成整个任务的时间。加速比主要取决于两个因素
  * 在原有系统上，能被改进的部分在总执行时间中所占的比例。这个值称为改进比例，记为$F_e$,它总是小于1
  * 通过改进的方式所取得的性能提高，即如果整个系统使用了改进的执行方式，那么，系统的执行速度会有多少提高，这个值等于在原来的条件下系统的执行时间与使用，改进组件后系统的执行时间纸币，记为$S_e$,它总大于1

![image-20230921001651318](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309210016501.png)

![image-20230921001821337](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309210018430.png)![image-20230921001831332](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309210018516.png)



### 4.3 性能评估

* 时钟频率法：以时钟频率高低衡量速度

* 指令执行速度法：表示机器运算速度的单位是MIPS

* 等效指令速度法（Gibson mix，吉普森混合法）：通过各类指令在程序中所占的比例（$W_i$）进行计算得到的。特点：考虑指令比例不同的问题

* 数据处理速率法（PDR，Processing Data Rate）：PDR值的方法来衡量机器性能，PDR值越大，机器性能越好。PDR=L/R 特点：考虑CPU+存储

* 综合理论性能法（CTP，Composite Theoretical Performance）：CTP用MTOPS（Million Theoretical Operations Per Second，每秒百万次理论运算）表示。CTP的估算方法是，首先算出处理部件每个计算单元的有效计算率，在按不同字长加以调整，得出该计算单元的理论性能，所有组成该处理部件的计算单元的理论性能之和即为CTP

* 基准程序法：把应用程序中用的最多、最频繁的那部分核心程序作为评估计算系统性能的标准程序，成为基准程序测试程序（benchmard）。基准程序法是目前已知承认的测试系统性能的较好方法

  ![image-20230921003003270](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309210030475.png)

* Web服务器的性能评估
  * 在Web服务器的测试中，反映其性能的指标主要有：最大并发连接数、响应延迟和吞吐量等
  * 常见的Web服务器性能评测方法有基准性能测试、压力测试和可靠性测试
* 系统监视
  * 进行系统监视通常有3种方式：一是通过系统本身提供的命令，如UNIX/Linux系统中的W、ps、last,Windows中的netstat等；二是通过系统记录文件查阅系统在特定时间内的运行状态；三是集成命令、文件记录和可视化技术的监控工具，如Windwos的Perfmon应用程序

## 5、基础扩展

### 5.1 数据的表示

#### 1）进制的转换：短除法

![image-20230921225330873](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309212253099.png)

### 5.2 流水线技术

* 相关参数计算：流水线执行时间计算、流水线吞吐率、流水线加速比
* 流水线是指在程序执行时多条指令重叠进行操作的一种准并行处理实现技术。各种部件同时处理是针对不同指令而言的，它们可同时为多条指令的不同部分进行工作，以提高各部件的利用率和指令的平均执行速度

![image-20230921230325159](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309212303375.png)

* 流水线执行时间

![image-20230921230847340](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309212308515.png)![image-20230921230947480](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309212309684.png)

* 吞吐率：流水线的吞吐率（TP）是指在单位时间流水线所完成 的任务数量或输出的结果数量。计算流水线吞吐率的最基本的公式如下：
  * $TP={指令条数 \over 流水线执行时间}$
* 流水线最大吞吐率
  * $TP_{max}=\lim_{n\rightarrow+\infty} {n \over (k+n-1)}={1 \over t}$
  * 一条指令的执行过程可以分解为取指、分析和执行三步，取指时间$t_{取指}=3△t$、分析时间$t_{分析}=2△t$、执行时间$t_{执行}=4△t$。10条指令的吞吐率？最大吞吐率？

* 流水线加速比计算：完成同样一批任务，不适用流水线所用的时间与使用流水线所用的时间比称为流水线的加速比。计算流水线加速比的基本公式如下
  * $S={不使用流水线的时间 \over 使用流水线执行时间}$

### 5.3 磁盘管理-磁盘优化分布存储

![image-20230921233153517](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309212331729.png)

![image-20230921233141964](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309212331211.png)

### 5.4 磁盘管理-磁盘单缓冲区与双缓冲区读取

![image-20230921233933953](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309212339173.png)![image-20230921233946601](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309212339914.png)

### 5.5 CISC与RISC

![image-20230921234508634](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309212345892.png)

### 5.6 校验码

#### 1）奇偶校验

* 奇偶校验码的编码方法是：由若干有效信息（如一个字节），再加上一个二进制位（校验位）组成校验码
* 奇校验：整个校验码（有效信息位和校验位）中”1“的个数为奇数
* 偶校验：整个校验码（有效信息位和校验位）中”1“的个数为偶数
* 奇偶校验，可检查1位的错误，不可纠错 

#### 2）循环校验码CRC

* CRC校验，可检错，不可纠错。循环冗余校验（CRC）
* CRC的编码方法是：在k位信息码之后拼接r位校验码。应用CRC码的关键是如何从k位信息位简便地得到r位校验位（编码），以及如何从k+r位信息码判断是否错误
* 循环冗余校验码编码规律如下：
  * 把待编码的N位有效信息表示为多项式M(X)
  * 把M(X)左移K位，得到M(X)*$X^k$，这样空出了K位，以便拼装K位余数（即校验位）
  * 选取一个K+1位的产生多项式G(X)，对M(X)*$X^k$做模2除
  * 把左移K位以后得有效信息位与余数R(X)做模2加减，拼接位CRC码，此时的CRC码共有N+K位
* 把接收到的CRC码约定的生成多项式G(X)去除，如果正确，则余数为0；如果某一位出错，则余数不为0.不同的位数出错其余数不同，余数和出错位序号之间有唯一的对应关系

![image-20230921235705091](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309212357397.png)

![image-20230922000030848](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309220000068.png)

#### 3）海明校验

![image-20230922000140644](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309220001853.png)

### 5.7 文件管理-树形目录结构

![image-20230922000643998](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309220006297.png)

### 5.8 数据传输控制方式

* 程序控制（查询）方式：分为无条件传送和程序查询方式两种。方法简单，硬件开销小，但I/O能力不高，严重影响CPU的利用率。

* 程序中断方式：与程序控制方式相比，中断方式因为CPU无需等待而提高了传输请求的响应速度。

  ![image-20230922001221071](https://smcjava.oss-cn-hangzhou.aliyuncs.com/java/202309220012345.png)

* DMA方式：DMA方式是为了在主存与外设之间实现高速、批量数据交换而设置的。DMA方式比程序控制方式与程序中断方式都高效
  * DMAC相总线裁决逻辑提出总线请求；CPU执行完当前总线周期即可释放总线控制权。此时DMA响应，通过DMAC通知I/O接口开始DMA传输。
* 通道方式
* I/O处理机